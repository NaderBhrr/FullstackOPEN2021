(this["webpackJsonpex1.1-1.2"]=this["webpackJsonpex1.1-1.2"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var o=n(15),r=n.n(o),a=n(6),c=n(3),u=n(1),s=n(0),i=function(e){var t=e.handleSearch,n=e.searchContact,o=Object(u.useState)(""),r=Object(c.a)(o,2),a=r[0],i=r[1],l="",d=("The contact you searched is found:\n ".concat(4),"Contact not found");return Object(s.jsxs)("div",{children:[Object(s.jsx)("h4",{children:"Search Phonebook:"}),Object(s.jsx)("input",{type:"search",name:"search",placeholder:"Search a contact",onKeyDown:t,onChange:function(e){i(e.target.value)}}),Object(s.jsx)("span",{children:n.searchResult&&a?"The contact you searched is found:\n ".concat(n.searchResult.name):!n.searchResult&&a?d:l})]})},l=(n(21),function(e){var t=e.persons,n=e.deleteContact;return Object(s.jsxs)("div",{className:"contact-list",children:[Object(s.jsx)("h3",{children:"Contact Information:"}),Object(s.jsx)("ul",{children:t.map((function(e,t){return Object(s.jsxs)("li",{children:[e.name," ",Object(s.jsxs)("div",{children:["\xa0",e.number]})," ",Object(s.jsx)("button",{onClick:function(){return n(e._id,e.name)},children:"Delete"})]},t)}))})]})}),d=(n(22),function(e){var t=Object.assign({},e);return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("form",{onSubmit:t.handleSubmit,children:Object(s.jsxs)("fieldset",{children:[Object(s.jsx)("legend",{children:"Add New Contact"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{id:"new-contact",type:"text",value:t.newName,onChange:t.handleNewPerson,required:!0,placeholder:"e.g. Tom Cruise","aria-required":!0,autoFocus:!0}),Object(s.jsx)("label",{htmlFor:"new-contact",children:"Name:"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{id:"new-contact-number",type:"tel",value:t.newPhoneNumber,onChange:t.handleNewPhoneNumber,required:!0,placeholder:"Enter Contact's Phone Number ...",autoComplete:"off"}),Object(s.jsx)("label",{htmlFor:"new-contact-number",children:"Phone Number:"})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})})})}),h=(n(23),function(e){var t=e.action,n=e.error;if(null===t)return null;var o={addPerson:"New contact is added to the phonebook",changeNumber:"The contact phone number updated",deletePerson:"Contact successfully deleted from the phonebook."},r={deletePerson:"The contact is already removed from the phonebook",minNameLength:"Person name must be 3 characters at least"},a={found:"The contact you search is available in the Phonebook"},c="add"===t?"add general":"update"===t?"update general":"delete general";return Object(s.jsxs)("div",{className:c,children:[Object(s.jsx)("span",{className:".error general",children:"deleteError"===n?r.deletePerson:"minLengthError"===n?r.minNameLength:null}),n?null:"add"===t?o.addPerson:"update"===t?o.changeNumber:"delete"===t?o.deletePerson:"search"===t?a.found:null]})}),b=n(4),j=n.n(b),f="/api/persons",m={getPersons:function(e){return j.a.get(f).then((function(e){return e.data})).then(e)},addPerson:function(e,t){return j.a.post(f,e).then((function(e){return e.data})).then(t)},deletePerson:function(e,t){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data})).then(t)},updatePerson:function(e,t){return j.a.put("".concat(f,"/").concat(e._id),e).then((function(e){return console.log(e),e.data})).then(t)}},O=(n(42),m.getPersons),p=m.addPerson,x=m.updatePerson,g=m.deletePerson,v=function(){var e=Object(u.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(u.useState)(""),b=Object(c.a)(r,2),j=b[0],f=b[1],m=Object(u.useState)(""),v=Object(c.a)(m,2),w=v[0],P=v[1],y=Object(u.useState)({}),C=Object(c.a)(y,2),N=C[0],S=C[1],k=Object(u.useState)(null),L=Object(c.a)(k,2),T=L[0],E=L[1],q=Object(u.useState)(null),A=Object(c.a)(q,2),F=A[0],R=A[1];Object(u.useEffect)((function(){O((function(e){return o(e)}))}),[T,F]),/[^\w\s]/g.test(j)&&(alert("".concat(j," is not a valid entry please try again")),f(""),P(""));return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{action:T,error:F}),Object(s.jsx)(i,{handleSearch:function(e){if("Enter"===e.key){var t=e.target.value;S({searchValue:t,searchResult:n.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))})}},searchContact:N}),Object(s.jsx)(d,{handleSubmit:function(e){if(e.preventDefault(),/[^\w\s]/g.test(j))return alert("".concat(j," is not a valid entry please try again")),f(""),void P("");if(!/\d/g.test(w))return alert("".concat(w," is not a valid entry. Please try again")),f(""),void P("");if(n.some((function(e){return e.name.toLowerCase()===j.toLowerCase()}))){if(n.some((function(e){return e.number===w})))return console.log("already true"),alert("".concat(j," already exists in the phonebook")),f(""),void P("");var t=Object(a.a)(Object(a.a)({},n.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}))),{},{number:w});if(window.confirm(' " '.concat(t.name,' " is already added to the phonebook, do you want to update old number with a new number?')))return x(t,(function(e){o(n.map((function(t){return t._id===e._id?e:t})))})).catch((function(e){return console.log(e)})),f(""),P(""),E("update"),void setTimeout((function(){E(null)}),5e3);f(""),P("")}n.some((function(e){return e.name.toLowerCase()===j.toLowerCase()&&e.number===w})),p({name:j,number:w},(function(e){o(n.concat(e)),f(""),P(""),E("add"),setTimeout((function(){E(null)}),5e3)})).catch((function(e){R("minLengthError"),E("validate"),setTimeout((function(){E(null),R(null)}),3500)}))},newName:j,handleNewPerson:function(e){f(e.target.value)},newPhoneNumber:w,handleNewPhoneNumber:function(e){P(e.target.value)}}),Object(s.jsx)(l,{persons:n,deleteContact:function(e,t){window.confirm("Are you sure to delete ".concat(t,"?"))&&g(e,(function(){O((function(e){return o(e)}))})).catch((function(t){R("deleteError"),o(n.filter((function(t){return t.id!==e}))),console.error(t.message),setTimeout((function(){E(null)}),5e3)})),E("delete"),setTimeout((function(){E(null)}),3e3)}})]})};n(43);r.a.render(Object(s.jsx)(v,{}),document.querySelector("#root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.83f32a73.chunk.js.map