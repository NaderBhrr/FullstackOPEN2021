(this["webpackJsonpex1.1-1.2"]=this["webpackJsonpex1.1-1.2"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(15),a=n.n(r),o=n(6),c=n(3),u=n(1),s=n(0),i=function(e){var t=e.handleSearch,n=e.searchContact,r=Object(u.useState)(""),a=Object(c.a)(r,2),o=a[0],i=a[1],d="",l=("The contact you searched is found:\n ".concat(4),"Contact not found");return Object(s.jsxs)("div",{children:[Object(s.jsx)("h4",{children:"Search Phonebook:"}),Object(s.jsx)("input",{type:"search",name:"search",placeholder:"Search a contact",onKeyDown:t,onChange:function(e){i(e.target.value)}}),Object(s.jsx)("span",{children:n.searchResult&&o?"The contact you searched is found:\n ".concat(n.searchResult.name):!n.searchResult&&o?l:d})]})},d=function(e){var t=e.persons,n=e.deleteContact;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Contact Information:"}),Object(s.jsx)("ul",{children:t.map((function(e,t){return Object(s.jsxs)("li",{children:[e.name," ",Object(s.jsxs)("div",{children:["\xa0",e.number]})," ",Object(s.jsx)("button",{onClick:function(){return n(e._id,e.name)},children:"Delete"})]},t)}))})]})},l=(n(21),function(e){var t=Object.assign({},e);return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("form",{onSubmit:t.handleSubmit,children:Object(s.jsxs)("fieldset",{children:[Object(s.jsx)("legend",{children:"Add New Contact"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{id:"new-contact",type:"text",value:t.newName,onChange:t.handleNewPerson,required:!0,placeholder:"e.g. Tom Cruise","aria-required":!0,autoFocus:!0,pattern:"^([\\D]{2,30}\\s+)+([a-zA-Z]{2,30})$"}),Object(s.jsx)("label",{htmlFor:"new-contact",children:"Name:"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{id:"new-contact-number",type:"tel",value:t.newPhoneNumber,onChange:t.handleNewPhoneNumber,required:!0,placeholder:"Enter Contact's Phone Number ...",autoComplete:"off"}),Object(s.jsx)("label",{htmlFor:"new-contact-number",children:"Phone Number:"})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})})})}),h=(n(22),function(e){var t=e.action,n=e.error;if(null===t)return null;var r={addPerson:"New contact is added to the phonebook",changeNumber:"The contact phone number updated",deletePerson:"Contact successfully deleted from the phonebook."},a={deletePerson:"The contact is already removed from the phonebook"},o="add"===t?"add general":"update"===t?"update general":"delete"===t?"delete general":null;return Object(s.jsxs)("div",{className:o,children:[Object(s.jsx)("span",{className:".error general",children:n?a.deletePerson:null}),n?null:"add"===t?r.addPerson:"update"===t?r.changeNumber:"delete"===t?r.deletePerson:null]})}),b=n(4),j=n.n(b),f="/api/persons",m={getPersons:function(e){return j.a.get(f).then((function(e){return e.data})).then(e)},addPerson:function(e,t){return j.a.post(f,e).then((function(e){return e.data})).then(t)},deletePerson:function(e,t,n){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data})).then(t).catch(n)},updatePerson:function(e,t){return j.a.put("".concat(f,"/").concat(e._id),e).then((function(e){return e.data})).then(t)}},O=m.getPersons,p=m.addPerson,x=m.updatePerson,w=m.deletePerson,v=function(){var e=Object(u.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],a=Object(u.useState)(""),b=Object(c.a)(a,2),j=b[0],f=b[1],m=Object(u.useState)(""),v=Object(c.a)(m,2),g=v[0],P=v[1],y=Object(u.useState)({}),C=Object(c.a)(y,2),N=C[0],S=C[1],k=Object(u.useState)(null),T=Object(c.a)(k,2),L=T[0],A=T[1],q=Object(u.useState)(null),D=Object(c.a)(q,2),E=D[0],F=D[1];Object(u.useEffect)((function(){O((function(e){return r(e)}))}),[]),/[^\w\s]/g.test(j)&&(alert("".concat(j," is not a valid entry please try again")),f(""),P(""));return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{action:L,error:E}),Object(s.jsx)(i,{handleSearch:function(e){if("Enter"===e.key){var t=e.target.value;S({searchValue:t,searchResult:n.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}))})}},searchContact:N}),Object(s.jsx)(l,{handleSubmit:function(e){if(e.preventDefault(),/[^\w\s]/g.test(j))return alert("".concat(j," is not a valid entry please try again")),f(""),void P("");if(!/\d/g.test(g))return alert("".concat(g," is not a valid entry. Please try again")),f(""),void P("");if(n.some((function(e){return e.name.toLowerCase()===j.toLowerCase()}))){if(n.some((function(e){return e.number===g})))return console.log("already true"),alert("".concat(j," already exists in the phonebook")),f(""),void P("");var t=Object(o.a)(Object(o.a)({},n.find((function(e){return e.name.toLowerCase()===j.toLowerCase()}))),{},{number:g});if(window.confirm("".concat(t.name," is already added to the phonebook, do you want to update old number with a new number?")))return x(t,(function(e){r(n.map((function(t){return t._id===e._id?e:t})))})),f(""),P(""),A("update"),void setTimeout((function(){A(null)}),5e3);f(""),P("")}n.every((function(e){return e.name.toLowerCase()!==j.toLowerCase()&&e.number===g})),p({name:j,number:g},(function(e){r(n.concat(e)),f(""),P(""),A("add"),setTimeout((function(){A(null)}),5e3)}))},newName:j,handleNewPerson:function(e){f(e.target.value)},newPhoneNumber:g,handleNewPhoneNumber:function(e){P(e.target.value)}}),Object(s.jsx)(d,{persons:n,deleteContact:function(e,t){window.confirm("Are you sure to delete ".concat(t,"?"))&&w(e,(function(){O((function(e){return r(e)}))}),(function(t){F("deleteError"),r(n.filter((function(t){return t.id!==e}))),console.error(t.message),setTimeout((function(){A(null)}),5e3)})),A("delete"),setTimeout((function(){A(null)}),5e3)}})]})};a.a.render(Object(s.jsx)(v,{}),document.querySelector("#root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a1149f21.chunk.js.map